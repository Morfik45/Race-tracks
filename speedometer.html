<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Speedometer</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: black;
            color: white;
            text-align: center;
        }

        .gauge {
            position: relative;
            width: 300px;
            height: 300px;
            margin: 20px auto;
            background: url('speedometer-background.png') no-repeat center;
            background-size: contain;
        }

        .needle {
            position: absolute;
            width: 10px;
            height: 150px;
            background: red;
            top: 50%;
            left: 50%;
            transform-origin: bottom center;
            transform: rotate(0deg);
        }

        .dial-container {
            display: flex;
            justify-content: space-around;
            margin-top: 30px;
        }

        .dial {
            position: relative;
            width: 150px;
            height: 150px;
            background: url('dial-background.png') no-repeat center;
            background-size: contain;
        }

        .small-needle {
            position: absolute;
            width: 6px;
            height: 75px;
            background: yellow;
            top: 50%;
            left: 50%;
            transform-origin: bottom center;
            transform: rotate(0deg);
        }

        .info {
            margin-top: 20px;
        }

        .info div {
            font-size: 1.2em;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <h1>Speedometer</h1>
    <div class="gauge">
        <div class="needle" id="speedNeedle"></div>
    </div>
    <div class="dial-container">
        <div class="dial">
            <div class="small-needle" id="rpmNeedle"></div>
        </div>
        <div class="dial">
            <div class="small-needle" id="fuelNeedle"></div>
        </div>
    </div>
    <div class="info">
        <div>Speed: <span id="speed">0</span> km/h</div>
        <div>RPM: <span id="rpm">0</span></div>
        <div>Fuel: <span id="fuel">100%</span></div>
    </div>

    <script>
        // Initialize values for speed, RPM, and fuel
        let speed = 0;
        let rpm = 0;
        let fuel = 100;

        // Last position and time for speed calculation
        let lastPos = { x: 0, y: 0, z: 0 };
        let lastTime = Date.now();

        // Function to update the gauges
        const updateGauges = () => {
            const now = Date.now();
            const deltaTime = (now - lastTime) / 1000; // Time in seconds

            // Replace these values with actual game data
            const pos_x = 0; // Replace with actual `pos_x` from game
            const pos_y = 0; // Replace with actual `pos_y` from game
            const pos_z = 0; // Replace with actual `pos_z` from game

            const dx = pos_x - lastPos.x;
            const dy = pos_y - lastPos.y;
            const dz = pos_z - lastPos.z;
            const distance = Math.sqrt(dx * dx + dy * dy + dz * dz);

            // Calculate speed (m/s to km/h)
            speed = (distance / deltaTime) * 3.6;

            lastPos = { x: pos_x, y: pos_y, z: pos_z };
            lastTime = now;

            // Update HTML elements
            document.getElementById('speed').innerText = speed.toFixed(1);
            document.getElementById('rpm').innerText = Math.round(rpm);
            document.getElementById('fuel').innerText = `${fuel.toFixed(1)}%`;

            // Rotate needles
            const maxSpeed = 240; // Max speed on speedometer
            const maxRpm = 8000; // Max RPM on RPM gauge
            const maxFuel = 100; // Max fuel percentage

            const speedAngle = (speed / maxSpeed) * 240 - 120; // -120 to start from left
            const rpmAngle = (rpm / maxRpm) * 240 - 120;
            const fuelAngle = (fuel / maxFuel) * 240 - 120;

            document.getElementById('speedNeedle').style.transform = `rotate(${speedAngle}deg)`;
            document.getElementById('rpmNeedle').style.transform = `rotate(${rpmAngle}deg)`;
            document.getElementById('fuelNeedle').style.transform = `rotate(${fuelAngle}deg)`;

            // Simulate decreasing fuel and RPM for testing (remove in live game)
            rpm = Math.min(maxRpm, rpm + 50); // Example RPM increment
            fuel = Math.max(0, fuel - 0.01);  // Simulated fuel consumption
        };

        // Update gauges every 100ms
        setInterval(updateGauges, 100);
    </script>
</body>
</html>
